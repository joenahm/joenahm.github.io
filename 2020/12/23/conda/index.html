<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>conda环境的配置 | 齐水长青</title>
	<link rel="icon" href="/favicon.ico">
	
<link rel="stylesheet" href="/css/common.css">
	
<meta name="generator" content="Hexo 4.2.1"></head>
<body>
	
<link rel="stylesheet" href="/css/header.css">

<div id="atama">
	<div id="title"><a href="/">齐水长青</a></div>
	<div id="subtitle"><span>九天揽月总不及，恰似飞鸿踏雪泥</span></div>
	<nav>
		<ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%9D%E6%83%B3/" rel="tag">思想</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF/" rel="tag">技术</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BC%AB%E8%AF%84/" rel="tag">漫评</a><span class="tag-list-count">2</span></li></ul>	
	</nav>
</div>

	
<link rel="stylesheet" href="/css/post.css">

<div id="wrapper">
	<div id="stage">
		<h2 id="title">conda环境的配置</h2>
		<p id="date">2020.12.23</p>
		<br>
		<div id="content"><iframe class="video" src="//player.bilibili.com/player.html?aid=245939403&bvid=BV1Mv411x775&cid=275245052&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<h3 id="关于conda，啰嗦几句"><a href="#关于conda，啰嗦几句" class="headerlink" title="关于conda，啰嗦几句"></a>关于conda，啰嗦几句</h3><ul>
<li><p>conda是一个配置隔离python环境的工具</p>
</li>
<li><p>因为有些时候我们需要不同版本的python或不同版本的pip模块（比如你需要跑两个从github上下下来的代码，他们的tensorflow版本一个要求1.0一个要求2.0）</p>
</li>
<li><p>conda既可以实现pip模块不同版本共存，也可以实现python不同版本共存</p>
</li>
<li><p>conda只是一个工具，它有两种发行版，分别是Anaconda和Miniconda</p>
<ul>
<li><p>anaconda是一个大而全的工具集合，包括了非常多常用的pip模块（如numpy、pandas、scipy、matplotlib等），它还有图形化的管理工具等</p>
</li>
<li><p>miniconda是一个单纯的conda工具，仅自带极少的python必要的包，干净纯粹，可以按照自己的需求构建任意环境</p>
</li>
<li><p>miniconda比anaconda小非常多，可以实现全部日常需求，只不过需要自己动手</p>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>由于anaconda和miniconda的服务器都在国外，所以下载速度会比较慢</p>
<p>推荐大家使用镜像源进行下载，这里使用清华的conda镜像</p>
<p>miniconda下载地址: <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda</a></p>
<p>anaconda下载地址: <a href="[https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive">https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive</a></p>
<p>打开后可以选择适合自己系统的安装包（win是exe，linux是sh），然后可以根据后边的日期找到最新版本，一般都选3.0的版本，因为2.0是给python2用的</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul>
<li><p>win用户直接双击exe文件不断下一步即可</p>
</li>
<li><p>linux用户到命令行中执行 <code>bash 下载文件的名字.sh</code> </p>
<blockquote>
<p>比如 <code>bash Miniconda3-latest-Linux-x86_64.sh</code><br>命令即可开始安装，按照提示回车即可完成安装</p>
</blockquote>
</li>
</ul>
<h3 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h3><p>这是安装完成后最重要的一步，还是因为conda的仓库都在国外，所以访问速度很慢，我们要把仓库的地址换成国内的镜像源，才能正常的使用（以正常速度下载而不是龟速）</p>
<p><strong>win用户：</strong></p>
<ol>
<li><p>打开开始菜单，会找到conda的prompt的程序（就是在conda文件夹下，名字里带prompt，图标是黑色控制台的程序）</p>
</li>
<li><p>执行命令： <code>conda config --set show_channel_urls yes</code> （复制命令粘贴后，回车执行）</p>
</li>
<li><p>去C盘找到Users文件夹，然后找到你用户名字的文件夹（假设你系统装在C盘）</p>
<blockquote>
<p>比如我的叫Joe，你可能是Administrator或你自己起的别的什么名字，就可以看到名叫 <code>.condarc</code> 的文件</p>
</blockquote>
</li>
<li><p>打开 <code>.condarc</code> 文件，删掉里边 <strong>全部</strong> 的东西，然后去<a href="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/anaconda</a>这个地址，复制这个框框里全部内容，然后粘贴到 <code>.condarc</code> 里保存退出</p>
</li>
</ol>
<p><img src="code_block.png" alt=""></p>
<blockquote>
<p>你的框框可能是白的</p>
</blockquote>
<ol start="5">
<li>回到刚才的prompt黑黑的控制台窗口（你不会关了吧，关了就重新打开），然后执行 <code>conda clean -i</code> 就ok了</li>
</ol>
<p><strong>linux用户：</strong></p>
<ol>
<li><p>打开你的终端（别告诉我你不知道什么是终端），然后切换到你conda的安装位置，默认会在用户文件夹下，进入它的bin文件夹</p>
</li>
<li><p>这个bin文件夹下会有一个叫 <code>conda</code> 的程序，你执行 <code>./conda init</code> 即可完成初始化，如果不行试试 <code>./conda init bash</code> ，之后你再进终端默认就是conda的base环境了</p>
</li>
<li><p>之后的操作和win上类似：去用户目录下找 <code>.condarc</code> 文件，如果没有你就手动创建一个，然后去 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/anaconda</a>复制框框里全部的内容，粘贴到 <code>.condarc</code> 保存退出（如果本来有内容就全部删掉再粘贴）</p>
</li>
<li><p>再执行一个 <code>conda clean -i</code> 就完成了换源</p>
</li>
</ol>
<hr>
<p>然后就是正常的使用，默认conda会是base环境，你当然可以在这里装任何你需要的包，如果你想要创建多个隔离的虚拟环境，你还需要掌握conda环境的创建和切换</p>
<h3 id="创建环境"><a href="#创建环境" class="headerlink" title="创建环境"></a>创建环境</h3><p>一般我们都是用名字进行创建，执行 <code>conda create -n 你想要的名字 python</code> 即可创建</p>
<p>conda的命令都以 <code>conda</code> 开头，然后 <code>create</code> 表示创建环境，然后 <code>-n</code> 表示要给环境取个名字，后边<strong>空格</strong>一下跟上名字就好了，然后后边的 <code>python</code> 是要安装的模块的名字，这里只装了一个python，还可以指定版本，比如python=3.8，如果还想装别的，可以继续往后跟</p>
<blockquote>
<p>示例：<code>conda create -n tf python=3.8 tensorflow=2.2</code></p>
</blockquote>
<p>这样，你就得到了一个名叫tf包含python和tensorflow两个包的conda环境</p>
<h3 id="查看环境"><a href="#查看环境" class="headerlink" title="查看环境"></a>查看环境</h3><p>你可以执行 <code>conda info -e</code> 来查看所有环境，比如我的是这样的：</p>
<p><img src="list_envs.png" alt=""></p>
<blockquote>
<p>base里的那个*表示的是当前环境是它</p>
</blockquote>
<h3 id="激活（切换）环境"><a href="#激活（切换）环境" class="headerlink" title="激活（切换）环境"></a>激活（切换）环境</h3><p>创建好了之后，我们就可以执行命令通过名字来激活指定的环境，比如我可以执行： <code>conda activate BTSer</code> 来切换到我这个环境</p>
<p>如果你刚才跟着做了，你可以通过 <code>conda activate tf</code> 来切换到你的tensorflow环境</p>
<h3 id="在环境中安装模块"><a href="#在环境中安装模块" class="headerlink" title="在环境中安装模块"></a>在环境中安装模块</h3><p>安装前要确认一下，当前是否在你想要的环境中，如果没有先切换一下，省得安装到错误的环境中去了。确认无误后，执行 <code>conda install 模块名</code> 即可安装，比如 <code>conda install scipy</code></p>
<h3 id="删除环境"><a href="#删除环境" class="headerlink" title="删除环境"></a>删除环境</h3><p>如果你不想要某个环境了，可以通过 <code>conda remove -n 环境名 --all</code> 来删除这个环境</p>
</div>
		<ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF/" rel="tag">技术</a></li></ul>
	</div>
</div>


	
<link rel="stylesheet" href="/css/footer.css">

<footer>
	<ul class="links" style="width: 250px">
		<li>Copyright©<a href="mailto:joenahm@yeah.net">JoeNahm</a></li>
		<li style="font-style: italic">Powered by <a target="_blank" href="http://hexo.io">Hexo</a></li>
	</ul>
	<ul class="links">
		<li><a target="_blank" href="https://blog.csdn.net/joenahm" title="我的CSDN博客">此红柳</a></li>
		<li><a target="_blank" href="https://www.cnblogs.com/joenahm/" title="我的cnblogs博客">彼红柳</a></li>
	</ul>
	<ul class="links">
		<li><a target="_blank" href="http://www.xuzhengke.cn/">厂长的博客</a></li>
		<li><a target="_blank" href="http://www.yaoyorozu.cn/">教主的博客</a></li>
	</ul>
	<ul class="links">
		<li><a target="_blank" href="https://space.bilibili.com/13957052">Bilibili主页</a></li>	
		<li><a target="_blank" href="https://github.com/joenahm">我的GitHub</a></li>
		<li><a target="_blank" href="https://gitee.com/joenahm">我的Gitee</a></li>
	</ul>
	<div style="clear: both;"></div>
</footer>
</body>
</html>